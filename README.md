# IND320 - Electricity & Weather Data Dashboard

A multi-page **Streamlit** dashboard for exploring Norwegian electricity production/consumption data alongside historical weather data. Built as part of the IND320 course at UiA.

## Features

- **Electricity Production** — Pie charts and time-series plots of production by energy group (hydro, wind, solar, thermal, other) per price area (NO1–NO5).
- **STL Decomposition & Spectrogram** — Seasonal-trend decomposition and spectral analysis of electricity data.
- **Supply/Demand Forecasting** — Time-series forecasting for electricity supply and demand.
- **Weather Visualisation** — Interactive line, bar, and histogram plots of temperature, precipitation, wind speed, and wind direction from the Open-Meteo ERA5 archive.
- **Outlier Detection (LOF)** — Local Outlier Factor analysis on weather data.
- **Interactive Map** — Folium choropleth map of Norwegian price areas with electricity overlays and location selection.
- **Snow Drift Analysis** — Annual snow transport calculations using the Tabler (2003) method, with wind-rose plots and fence height estimation.
- **Correlation Analysis** — Cross-analysis between weather variables and electricity data.

## Project Structure

```
ind320_my/
├── main.py                 # Streamlit entry point (home page)
├── utilities.py            # Shared helpers: MongoDB connection, API calls, sidebar setup
├── snow_drift.py           # Snow drift transport calculations (Tabler 2003)
├── requirements.txt        # Python dependencies (generated by uv)
├── pages/                  # Streamlit multi-page app pages
│   ├── el_prod.py          # Electricity production visualisation
│   ├── el_stl_spect.py     # STL decomposition & spectrogram
│   ├── el_forecasting.py   # Supply/demand forecasting
│   ├── weather_plots.py    # Weather data plots
│   ├── weather_lof.py      # Outlier detection & LOF analysis
│   ├── comb_map.py         # Interactive map & snow drift analysis
│   ├── comb_forecasting_weather.py  # Forecasting with weather features
│   └── comb_corr.py        # Weather–electricity correlation analysis
├── data/
│   ├── file.geojson        # GeoJSON boundaries for Norwegian price areas
│   └── open-meteo-subset.csv  # Sample weather dataset
├── assignments/            # Course assignment notebooks
├── lectures/               # Lecture notebooks and materials
├── .streamlit/             # Streamlit configuration (secrets, theme)
└── .devcontainer/          # Dev container config for Codespaces
```

## Data Sources

| Source | Description |
|--------|-------------|
| [Elhub API](https://api.elhub.no) | Norwegian electricity production & consumption data |
| [Open-Meteo Archive API](https://archive-api.open-meteo.com) | Historical weather data (ERA5 reanalysis) |
| [Open-Meteo Geocoding API](https://geocoding-api.open-meteo.com) | City-to-coordinate geocoding |

## Getting Started

### Prerequisites

- Python 3.11+
- A MongoDB Atlas instance with Elhub data loaded
- Streamlit secrets configured in `.streamlit/secrets.toml`:
  ```toml
  [mongo]
  uri = "mongodb+srv://<user>:<password>@<cluster>/?retryWrites=true&w=majority"
  ```

### Installation

```bash
pip install -r requirements.txt
```

### Running the Dashboard

```bash
streamlit run main.py
```

The app will be available at `http://localhost:8501`.

### Using Dev Containers / Codespaces

The repo includes a `.devcontainer/devcontainer.json` that automatically installs dependencies and starts the Streamlit server on port 8501.

## Tech Stack

- **Streamlit** — Dashboard framework
- **Plotly** — Interactive charts
- **Folium / streamlit-folium** — Map visualisation
- **Pandas / NumPy / SciPy** — Data processing
- **scikit-learn** — Machine learning (LOF, forecasting)
- **statsmodels** — STL decomposition and statistical models
- **River** — Online/incremental learning
- **MongoDB (PyMongo)** — Electricity data storage
- **Open-Meteo API** — Weather data source
